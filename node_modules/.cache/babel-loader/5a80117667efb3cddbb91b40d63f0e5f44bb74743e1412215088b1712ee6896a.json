{"ast":null,"code":"import { AEventCallbackDict } from \"../aevents\";\nimport { v4 as uuidv4 } from \"uuid\";\nexport class AHandlesEvents {\n  constructor() {\n    this._eventCallbackDicts = {};\n    //</editor-fold>\n    //##################\\\\--ASignalsEvents--//##################\n    //##################//--ASubscribesToEvents--\\\\##################\n    //<editor-fold desc=\"ASubscribesToEvents\">\n    this._subscriptions = {};\n  }\n  _getEventCallbackDict(eventName) {\n    return this._eventCallbackDicts[eventName];\n  }\n  addEventListener(eventName, callback, handle) {\n    if (this._eventCallbackDicts[eventName] === undefined) {\n      this._eventCallbackDicts[eventName] = new AEventCallbackDict(eventName);\n    }\n    return this._eventCallbackDicts[eventName].addCallback(callback, handle);\n  }\n  addEventListeners(eventName, callbacks, handle) {\n    if (this._eventCallbackDicts[eventName] === undefined) {\n      this._eventCallbackDicts[eventName] = new AEventCallbackDict(eventName);\n    }\n    return this._eventCallbackDicts[eventName].addCallback(callbacks, handle);\n  }\n  addOneTimeEventListener(eventName, callback, handle) {\n    if (this._eventCallbackDicts[eventName] === undefined) {\n      this._eventCallbackDicts[eventName] = new AEventCallbackDict(eventName);\n    }\n    const self = this;\n    handle = handle ? handle : uuidv4();\n    function wrapped(...args) {\n      callback(...args);\n      self.removeEventListener(eventName, handle);\n    }\n    return this._eventCallbackDicts[eventName].addCallback(wrapped, handle);\n  }\n  removeEventListener(eventName, handle) {\n    if (this._eventCallbackDicts[eventName] === undefined) {\n      return;\n    }\n    return this._eventCallbackDicts[eventName].removeCallback(handle);\n  }\n  signalEvent(eventName, ...args) {\n    if (this._eventCallbackDicts[eventName] === undefined) {\n      this._eventCallbackDicts[eventName] = new AEventCallbackDict(eventName);\n    }\n    this._getEventCallbackDict(eventName).signalEvent(...args);\n  }\n  subscribe(callbackSwitch, name) {\n    name = name ? name : uuidv4();\n    if (name in this._subscriptions) {\n      if (this._subscriptions[name].active) {\n        this._subscriptions[name].deactivate();\n        console.warn(`Re-Subscribing to \"${name}\", which already has a subscription!`);\n      }\n    }\n    this._subscriptions[name] = callbackSwitch;\n  }\n  unsubscribe(name, errorIfAbsent = true) {\n    if (name in this._subscriptions) {\n      if (this._subscriptions[name].active) {\n        this._subscriptions[name].deactivate();\n      }\n      delete this._subscriptions[name];\n    } else if (errorIfAbsent) {\n      // select both, drag on one, and release with shift then click again\n      throw new Error(`tried to remove subscription \"${name}\", but no such subscription found in ${this}`);\n    }\n  }\n  clearSubscriptions() {\n    for (let name in this._subscriptions) {\n      this.unsubscribe(name);\n    }\n  }\n  deactivateSubscription(name) {\n    if (name in this._subscriptions) {\n      if (this._subscriptions[name].active) {\n        this._subscriptions[name].deactivate();\n      }\n    } else {\n      throw new Error(`tried to deactivate subscription \"${name}\", but no such subscription found in ${this}`);\n    }\n  }\n  activateSubscription(name) {\n    if (name in this._subscriptions) {\n      if (!this._subscriptions[name].active) {\n        this._subscriptions[name].activate();\n      }\n    } else {\n      throw new Error(`tried to activate subscription \"${name}\", but no such subscription found in ${this}`);\n    }\n  }\n\n  //</editor-fold>\n  //##################\\\\--ASubscribesToEvents--//##################\n}","map":{"version":3,"names":["AEventCallbackDict","v4","uuidv4","AHandlesEvents","constructor","_eventCallbackDicts","_subscriptions","_getEventCallbackDict","eventName","addEventListener","callback","handle","undefined","addCallback","addEventListeners","callbacks","addOneTimeEventListener","self","wrapped","args","removeEventListener","removeCallback","signalEvent","subscribe","callbackSwitch","name","active","deactivate","console","warn","unsubscribe","errorIfAbsent","Error","clearSubscriptions","deactivateSubscription","activateSubscription","activate"],"sources":["/Users/twist/Documents/Books/Fall 2024/Graphics/A1-Intro-To-Graphics-FA2024/src/anigraph/base/aobject/AHandlesEvents.ts"],"sourcesContent":["import {ACallbackSwitch, AEventCallbackDict} from \"../aevents\";\nimport {v4 as uuidv4} from \"uuid\";\n\nexport class AHandlesEvents {\n    protected _eventCallbackDicts: { [name: string]: AEventCallbackDict } = {};\n\n    _getEventCallbackDict(eventName: string) {\n        return this._eventCallbackDicts[eventName];\n    }\n\n    addEventListener(eventName: string, callback: (...args: any[]) => void, handle?: string) {\n        if (this._eventCallbackDicts[eventName] === undefined) {\n            this._eventCallbackDicts[eventName] = new AEventCallbackDict(eventName);\n        }\n        return this._eventCallbackDicts[eventName].addCallback(callback, handle);\n    }\n\n    addEventListeners(eventName: string, callbacks: ((...args: any[]) => void)[], handle?: string) {\n        if (this._eventCallbackDicts[eventName] === undefined) {\n            this._eventCallbackDicts[eventName] = new AEventCallbackDict(eventName);\n        }\n        return this._eventCallbackDicts[eventName].addCallback(callbacks, handle);\n    }\n\n    addOneTimeEventListener(eventName: string, callback: (...args: any[]) => void, handle?: string) {\n        if (this._eventCallbackDicts[eventName] === undefined) {\n            this._eventCallbackDicts[eventName] = new AEventCallbackDict(eventName);\n        }\n        const self = this;\n        handle = handle ? handle : (uuidv4() as string);\n\n        function wrapped(...args: []) {\n            callback(...args);\n            self.removeEventListener(eventName, handle as string);\n        }\n\n        return this._eventCallbackDicts[eventName].addCallback(wrapped, handle);\n    }\n\n    removeEventListener(eventName: string, handle: string) {\n        if (this._eventCallbackDicts[eventName] === undefined) {\n            return;\n        }\n        return this._eventCallbackDicts[eventName].removeCallback(handle);\n    }\n\n    signalEvent(eventName: string, ...args: any[]) {\n        if (this._eventCallbackDicts[eventName] === undefined) {\n            this._eventCallbackDicts[eventName] = new AEventCallbackDict(eventName);\n        }\n        this._getEventCallbackDict(eventName).signalEvent(...args);\n    }\n\n    //</editor-fold>\n    //##################\\\\--ASignalsEvents--//##################\n\n    //##################//--ASubscribesToEvents--\\\\##################\n    //<editor-fold desc=\"ASubscribesToEvents\">\n    protected _subscriptions: { [name: string]: ACallbackSwitch } = {};\n\n    public subscribe(callbackSwitch: ACallbackSwitch, name?: string) {\n        name = name ? name : uuidv4();\n        if (name in this._subscriptions) {\n            if (this._subscriptions[name].active) {\n                this._subscriptions[name].deactivate();\n                console.warn(`Re-Subscribing to \"${name}\", which already has a subscription!`);\n            }\n        }\n        this._subscriptions[name] = callbackSwitch;\n    }\n\n    public unsubscribe(name: string, errorIfAbsent: boolean = true) {\n        if (name in this._subscriptions) {\n            if (this._subscriptions[name].active) {\n                this._subscriptions[name].deactivate();\n            }\n            delete this._subscriptions[name];\n        } else if (errorIfAbsent) {\n            // select both, drag on one, and release with shift then click again\n            throw new Error(`tried to remove subscription \"${name}\", but no such subscription found in ${this}`);\n        }\n    }\n\n    clearSubscriptions() {\n        for (let name in this._subscriptions) {\n            this.unsubscribe(name);\n        }\n    }\n\n    deactivateSubscription(name: string) {\n        if (name in this._subscriptions) {\n            if (this._subscriptions[name].active) {\n                this._subscriptions[name].deactivate();\n            }\n        } else {\n            throw new Error(`tried to deactivate subscription \"${name}\", but no such subscription found in ${this}`);\n        }\n    }\n\n    activateSubscription(name: string) {\n        if (name in this._subscriptions) {\n            if (!this._subscriptions[name].active) {\n                this._subscriptions[name].activate();\n            }\n        } else {\n            throw new Error(`tried to activate subscription \"${name}\", but no such subscription found in ${this}`);\n        }\n    }\n\n    //</editor-fold>\n    //##################\\\\--ASubscribesToEvents--//##################\n\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
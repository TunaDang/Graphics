{"ast":null,"code":"import _initializerDefineProperty from \"/Users/twist/Documents/Books/Fall 2024/Graphics/A1-Intro-To-Graphics-FA2024/node_modules/@babel/runtime/helpers/esm/initializerDefineProperty.js\";\nimport _applyDecoratedDescriptor from \"/Users/twist/Documents/Books/Fall 2024/Graphics/A1-Intro-To-Graphics-FA2024/node_modules/@babel/runtime/helpers/esm/applyDecoratedDescriptor.js\";\nimport _initializerWarningHelper from \"/Users/twist/Documents/Books/Fall 2024/Graphics/A1-Intro-To-Graphics-FA2024/node_modules/@babel/runtime/helpers/esm/initializerWarningHelper.js\";\nvar _class, _descriptor, _dec, _class2;\nimport { ASerializable, AObjectState, AModel } from \"../../base\";\nimport { AMaterial } from \"./AMaterial\";\nimport { Color } from \"../../math\";\nexport let AMaterialModelBase = (_class = class AMaterialModelBase extends AModel {\n  get defaults() {\n    return this._defaults;\n  }\n  set defaults(v) {\n    this._defaults = v;\n  }\n\n  // abstract get color():Color;\n  // abstract set color(c:Color);\n\n  setSharedParam(name, val) {\n    console.warn(\"Shader params not implemented yet. Need to add listeners to model.\");\n    this.sharedParameters[name] = val;\n  }\n  setSharedParameters(params) {\n    this.sharedParameters = params;\n  }\n  getMaterialGUIParams(material) {\n    const self = this;\n    return {};\n  }\n  static MaterialGUIColorControl(material, paramKey) {\n    const paramName = paramKey ? paramKey : 'color';\n    let rval = {};\n    rval[paramName] = {\n      value: material.getValue(paramName) ? Color.FromThreeJS(material.getValue(paramName)).toHexString() : \"#000000\",\n      onChange: v => {\n        let selectedColor = Color.FromString(v);\n        material.setValue(paramName, selectedColor.asThreeJS());\n      }\n    };\n    return rval;\n  }\n  static MaterialGUIControl(material, paramName, defaultValue, otherSpecs) {\n    let rval = {};\n    rval[paramName] = {\n      value: material.getValue(paramName) ? material.getValue(paramName) : defaultValue,\n      onChange: v => {\n        material.setValue(paramName, v);\n      },\n      ...otherSpecs\n    };\n    return rval;\n  }\n  constructor(name, materialClass, defaults, sharedParams, ...args) {\n    super();\n    _initializerDefineProperty(this, \"sharedParameters\", _descriptor, this);\n    this._defaults = void 0;\n    this.materialClass = void 0;\n    this.name = void 0;\n    if (name) {\n      this.name = name;\n    }\n    if (materialClass) {\n      this.materialClass = materialClass;\n    }\n    if (sharedParams) {\n      this.sharedParameters = sharedParams;\n    } else {\n      this.sharedParameters = {};\n    }\n    if (defaults) {\n      this.defaults = defaults;\n    }\n  }\n  _CreateTHREEJS() {\n    return new this.materialClass({\n      ...this.defaults,\n      ...this.sharedParameters\n    });\n  }\n  CreateMaterial(...args) {\n    let material = new AMaterial();\n    material.init(this);\n    material.setValues({\n      ...this.defaults,\n      ...this.sharedParameters\n    });\n    return material;\n  }\n}, _descriptor = _applyDecoratedDescriptor(_class.prototype, \"sharedParameters\", [AObjectState], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: null\n}), _class);\nexport let AMaterialModel = (_dec = ASerializable(\"AMaterialModel\"), _dec(_class2 = class AMaterialModel extends AMaterialModelBase {\n  constructor(name, materialClass, defaults, sharedParams, ...args) {\n    super(name, materialClass, sharedParams, defaults);\n  }\n}) || _class2);","map":{"version":3,"names":["ASerializable","AObjectState","AModel","AMaterial","Color","AMaterialModelBase","_class","defaults","_defaults","v","setSharedParam","name","val","console","warn","sharedParameters","setSharedParameters","params","getMaterialGUIParams","material","self","MaterialGUIColorControl","paramKey","paramName","rval","value","getValue","FromThreeJS","toHexString","onChange","selectedColor","FromString","setValue","asThreeJS","MaterialGUIControl","defaultValue","otherSpecs","constructor","materialClass","sharedParams","args","_initializerDefineProperty","_descriptor","_CreateTHREEJS","CreateMaterial","init","setValues","_applyDecoratedDescriptor","prototype","configurable","enumerable","writable","initializer","AMaterialModel","_dec","_class2"],"sources":["/Users/twist/Documents/Books/Fall 2024/Graphics/A1-Intro-To-Graphics-FA2024/src/anigraph/rendering/material/AMaterialModel.ts"],"sourcesContent":["import * as THREE from \"three\";\nimport {ColorRepresentation} from \"three\";\nimport type {MaterialParameters} from \"three/src/materials/Material\";\nimport {ASerializable, AObjectState, AModel} from \"../../base\";\nimport type {ClassInterface} from \"../../basictypes\"\nimport {AMaterial} from \"./AMaterial\";\nimport {Color} from \"../../math\";\n\n\ntype MaterialParams = {\n    [P in keyof MaterialParameters]?:MaterialParameters[P];\n} & {\n    color?:ColorRepresentation|undefined;\n};\n\ntype ParamDict = {[name:string]:any};\n\n\nexport abstract class AMaterialModelBase<ParamInterface extends ParamDict> extends AModel{\n    @AObjectState sharedParameters!:{[name:string]:any};\n    public _defaults!:ParamInterface;\n    public materialClass!:ClassInterface<THREE.Material>;\n    public name!:string;\n    get defaults(){return this._defaults;}\n    set defaults(v:ParamInterface){this._defaults=v;}\n\n    // abstract get color():Color;\n    // abstract set color(c:Color);\n\n    setSharedParam(name:string, val:any){\n        console.warn(\"Shader params not implemented yet. Need to add listeners to model.\");\n        this.sharedParameters[name]=val;\n    }\n    setSharedParameters(params:ParamInterface){\n        this.sharedParameters = params;\n    }\n\n    getMaterialGUIParams(material:AMaterial){\n        const self = this;\n        return {}\n    }\n\n    static MaterialGUIColorControl(material:AMaterial, paramKey?:string){\n        const paramName = paramKey?paramKey:'color';\n        let rval:{[name:string]:any} = {};\n        rval[paramName] = {\n            value: material.getValue(paramName)?Color.FromThreeJS(material.getValue(paramName)).toHexString():\"#000000\",\n            onChange: (v: string) => {\n                let selectedColor = Color.FromString(v);\n                material.setValue(paramName, selectedColor.asThreeJS());\n            },\n        }\n        return rval;\n    }\n\n    static MaterialGUIControl(material:AMaterial, paramName:string, defaultValue:any, otherSpecs:{[name:string]:any}){\n        let rval:{[name:string]:any} = {};\n        rval[paramName] = {\n            value: material.getValue(paramName)?material.getValue(paramName):defaultValue,\n            onChange: (v: string) => {\n                material.setValue(paramName, v);\n            },\n            ...otherSpecs\n        }\n        return rval;\n    }\n\n    constructor(name?:string, materialClass?:ClassInterface<THREE.Material>, defaults?:ParamInterface, sharedParams?:ParamInterface, ...args:any[]) {\n        super();\n        if(name){this.name=name;}\n        if(materialClass){this.materialClass=materialClass;}\n        if(sharedParams){this.sharedParameters=sharedParams;}else{this.sharedParameters={};}\n        if(defaults){this.defaults=defaults;}\n    }\n\n    _CreateTHREEJS(){\n        return new this.materialClass({\n            ...this.defaults,\n            ...this.sharedParameters\n        }, );\n    }\n\n    CreateMaterial(...args:any[]){\n        let material =  new AMaterial();\n        material.init(this);\n        material.setValues({...this.defaults, ...this.sharedParameters});\n        return material;\n    }\n\n}\n\n\n@ASerializable(\"AMaterialModel\")\nexport class  AMaterialModel extends AMaterialModelBase<MaterialParams>{\n    constructor(name?:string, materialClass?:ClassInterface<THREE.Material>, defaults?:MaterialParameters, sharedParams?:MaterialParams, ...args:any[]) {\n        super(name, materialClass, sharedParams, defaults, );\n    }\n\n\n}\n\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}